<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/checkout.css">
    <title>Shop Bán Coffee</title>
    <style>
        .tab-container {
            width: 80%;
            margin: 20px auto;
        }

        .item-1 .tabs {
            display: flex;
            border-bottom: 2px solid #ccc;
            margin-bottom: 20px;
        }


        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid #ccc;
            border-bottom: none;
            background-color: #f9f9f9;
            flex: 1;
            text-align: center;
        }

        .tab.active {
            background-color: #fff;
            font-weight: bold;
        }

        .tab-content {
            padding: 20px;
            border: 1px solid #ccc;
            background-color: #fff;
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .get-location-btn {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .get-location-btn:hover {
            background-color: #45a049;
        }

        iframe {
            border: none;
        }
    </style>
</head>

<body>
<div class="main_page">

    <!-- Header page -->
    <div id="header"></div>
        <script>
            fetch('header.html')
              .then(response => response.text())
              .then(data => {
                document.getElementById('header').innerHTML = data;
              });
          </script>


            
    <!-- body page -->
    <div class="body_page">

        <div class="body_page-menu">
            <ul>
                <li><a href="index.html">
                    <i class="fa-solid fa-house"></i>
                    Trang chủ</a>
                </li>
                <span><i class="fa-solid fa-chevron-right"></i></span>
                <li><a href="">Thanh toán</a></li>
            </ul>
        </div>

        <div class="body_page-main">
            <div class="checkout-container">
                <div class="left-container">
                    <div class="clickbox">
                        <i class="fa-solid fa-folder"></i>
                        <div class="text-inbox">
                            <p>Bạn đã có tài khoản?<span id="login">Bấm vào đây để đăng nhập</span></p>
                        </div>
                    </div>
                    <form class="checkout-login" style="display: none">
                        <h1 style="margin-bottom: 30px; text-align: center">Đăng Nhập</h1>
                        <div class="item-1">

                            <div class="input-text">
                                <label for="email">Địa Chỉ Email<span style="color: red">*</span></label>
                                <input type="email" id="email" placeholder="Địa Chỉ Email...">
                            </div>
                        </div>
                        <div class="item-1">
                            <div class="input-text">
                                <label for="login-Pass">Mật Khẩu <span style="color: red">*</span></label>
                                <input type="password" id="login-Pass" placeholder="Mật Khẩu">
                            </div>
                        </div>
                        <div class="save">
                            <div class="save-container">

                                <input id="save" type="checkbox">
                                <label for="save">Nhớ Mật Khẩu!</label>
                            </div>
                            <div class="lost-pass">
                                <a href="">Quên Mật Khẩu?</a>
                            </div>

                        </div>
                        <button class="login-button">ĐĂNG NHẬP</button>
                    </form>
                </div>
                <div class="right-container">
                    <div class="clickbox">
                        <i class="fa-solid fa-folder"></i>
                        <div class="text-inbox">
                            <p>Có phiếu giảm giá?<span id="coupon">Bấm vào đây để nhập mã</span></p>
                        </div>

                    </div>
                    <form action="" id="useCoupon" style="display: none">
                        <div class="enter-Coupon">
                            <div class="item-1">
                                <div class="input-text">
                                    <input type="text" id="couponCode" placeholder="Mã Giảm Giá">

                                </div>
                            </div>
                        </div>
                        <button class="apply-coupon">ÁP DỤNG MÃ</button>
                    </form>
                </div>
            </div>

            <div class="checkout-container">
                <div class="left-container">


                    <div class="checkout-area">
                        <h3>Chi Tiết Thanh Toán</h3>
                        <div class="item-2">
                            <div class="item-1">
                                <div class="input-text">
                                    <label for="firstName">Tên <span style="color: red">*</span></label>
                                    <input type="text" id="firstName" placeholder="Tên">
                                </div>
                            </div>
                            <div class="item-1">
                                <div class="input-text">
                                    <label for="lastName">Họ <span style="color: red">*</span></label>
                                    <input type="text" id="lastName" placeholder="Họ">
                                </div>
                            </div>
                        </div>
                        <div class="item-2">
                            <div class="item-1">
                                <div class="input-text">
                                    <label for="phone">Số Điện Thoại <span style="color: red">*</span></label>
                                    <input type="tel" id="phone" placeholder="Số Điện Thoại">
                                </div>
                            </div>
                        </div>
                        <div class="newAccount">

                            <div class="item-1">
                                <p>Tạo tài khoản mới bằng cách nhập vào thông tin bên dưới. Nếu bạn đã có tài khoản, xin
                                    hãy đăng nhập ở phần đầu trang</p>
                                <div class="input-text">
                                    <label for="pass">Mật Khẩu <span style="color: red">*</span></label>
                                    <input type="password" id="pass" placeholder="Nhập Mật Khẩu">
                                </div>
                            </div>
                        </div>
                        <div class="item-1">
                            <!-- Tabs -->
                            <ul class="tabs">
                                <li class="tab active" data-tab="tab-current">Giao hàng tận nơi</li>
                                <li class="tab" data-tab="tab-table">Giao tới bàn</li>
                            </ul>

                            <!-- Tab Content -->
                            <div class="tab-content active" id="tab-current">
                                <h3>Giao tới địa chỉ hiện tại</h3>
                                <button class="get-location-btn">Lấy vị trí hiện tại</button>
                                <div id="current-location">
                                    <p>Vị trí hiện tại của bạn sẽ hiển thị tại đây.</p>
                                </div>
                            </div>

                            <div class="tab-content" id="tab-other">
                                <h3>Nhập địa chỉ khác</h3>
                                <div class="form-group">
                                    <label for="other-address">Địa chỉ giao hàng:</label>
                                    <input type="text" id="other-address" placeholder="Nhập địa chỉ">
                                </div>
                            </div>

                            <div class="tab-content" id="tab-table">
                                <h3>Giao tới bàn</h3>
                                <div class="form-group">
                                    <label for="shop-table">Chọn số bàn:</label>
                                    <select id="shop-table">
                                        <option value="address1">Bàn số 1</option>
                                        <option value="address2">Bàn số 2</option>
                                        <option value="address3">Bàn số 3</option>
                                        <option value="address4">Bàn số 4</option>
                                        <option value="address5">Bàn số 5</option>
                                        <option value="address6">Bàn số 6</option>
                                        <option value="address7">Bàn số 7</option>
                                        <option value="address8">Bàn số 8</option>
                                        <option value="address9">Bàn số 9</option>
                                        <option value="address10">Bàn số 10</option>
                                    </select>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="shop-floor">Chọn tầng:</label>
                                    <select id="shop-floor">
                                        <option value="address1">Tầng 1</option>
                                        <option value="address2">Tầng 2</option>
                                        <option value="address3">Tầng 3</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="shop-address">Chọn quán:</label>
                                    <select id="shop-address">
                                        <option value="address1">Quán Coffee 1 - Khu Phố 6, Linh Trung, Thủ Đức, Thành phố Hồ Chí Minh</option>
                                        <option value="address2">Quán Coffee 2 - Đường Lê Văn Việt, Quận 9,Thành phố Hồ Chí Minh </option>
                                        <option value="address3">Quán Coffee 3 - Gò Vấp, Tân Bình, Thành phố Hồ Chí Minh</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="difference-Add">

                            <div class="item-2">
                                <div class="item-1">
                                    <div class="input-text">
                                        <label for="firstName2">Tên <span style="color: red">*</span></label>
                                        <input type="text" id="firstName2" placeholder="Tên">
                                    </div>
                                </div>
                                <div class="item-1">
                                    <div class="input-text">
                                        <label for="lastName2">Họ <span style="color: red">*</span></label>
                                        <input type="text" id="lastName2" placeholder="Họ">
                                    </div>
                                </div>
                            </div>
                            <div class="item-1">
                                <div class="input-text">
                                    <label for="companyName2">Tên Công Ty</label>
                                    <input type="text" id="companyName2" placeholder="Tên Công Ty">
                                </div>
                            </div>
                            <div class="item-1">
                                <div class="input-text">
                                    <label for="streetAddress2">Số Nhà, Tên Đường <span
                                            style="color: red">*</span></label>
                                    <input type="text" id="streetAddress2" placeholder="Số Nhà, Tên Đường">
                                </div>
                            </div>
                            <div class="item-1">
                                <div class="input-text">
                                    <label for="ward2">Phường / Xã <span style="color: red">*</span></label>
                                    <input type="text" id="ward2" placeholder="Phường / Xã">
                                </div>
                            </div>
                            <div class="item-1">
                                <div class="input-text">
                                    <label for="district2">Quận / Huyện <span style="color: red">*</span></label>
                                    <input type="text" id="district2" placeholder="Quận / Huyện">
                                </div>
                            </div>
                            <div class="item-1">
                                <div class="input-text">
                                    <label for="city2">Tỉnh / Thành Phố <span style="color: red">*</span></label>
                                    <input type="text" id="city2" placeholder="Tỉnh / Thành Phố">
                                </div>
                            </div>
                            <div class="item-2">
                                <div class="item-1">
                                    <div class="input-text">
                                        <label for="mail2">Địa Chỉ Email <span style="color: red">*</span></label>
                                        <input type="email" id="mail2" placeholder="Địa Chỉ Email">
                                    </div>
                                </div>
                                <div class="item-1">
                                    <div class="input-text">
                                        <label for="phone2">Số Điện Thoại <span style="color: red">*</span></label>
                                        <input type="tel" id="phone2" placeholder="Số Điện Thoại">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="item-1">
                            <div class="input-text">
                                <label for="note">Ghi Chú</label>
                                <textarea name="note" id="note" cols="30" rows="10"
                                          placeholder="Ghi chú về đơn hàng của bạn, ví dụ: lưu ý đặc biệt về vận chuyển..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="right-container">


                    <div class="your-order">
                        <h3>Đơn Hàng Của Bạn</h3>
                        <div class="order-table">
                            <table>
                                <thead>
                                <tr>
                                    <th>Sản Phẩm</th>
                                    <th>Số Lượng</th>
                                    <th>Giá</th>
                                    <th>Tổng</th>
                                </tr>
                                </thead>
                                <tbody id="order-items">
                                <!-- Sản phẩm mẫu -->
                                <tr>
                                    <td>Cà Phê Sữa Đá</td>
                                    <td>2</td>
                                    <td>30,000₫</td>
                                    <td>60,000₫</td>
                                </tr>
                                <tr>
                                    <td>Bánh Ngọt</td>
                                    <td>1</td>
                                    <td>40,000₫</td>
                                    <td>40,000₫</td>
                                </tr>
                                </tbody>
                                <tfoot>
                                <tr class="cartSubtotal">
                                    <th colspan="3" style="text-align: right;">Tổng Giỏ Hàng:</th>
                                    <td><span id="cart-total">100,000₫</span></td>
                                </tr>
                                </tfoot>
                            </table>
                            <div class="collapsible_set">
                                <button id="collapsible1" onclick="payment(this.id)"><h5>
                                    THANH TOÁN KHI NHẬN HÀNG
                                    (COD)</h5></button>
                                <div class="content1 show"><p>Hình thức thanh toán khi nhận hàng, giao hàng thu tiền.
                                    Người
                                    mua với hình thức ship COD chỉ thanh toán tiền khi nhận được hàng, sau đó tiền sẽ
                                    chuyển về cho người bán thông qua đơn vị vận chuyển trên.</p></div>
                                <button id="collapsible2" onclick="payment(this.id)"><h5>THANH TOÁN BẰNG MOBILE
                                    BANKING</h5></button>
                                <div class="content2"><p>Thanh toán hoá đơn chỉ với một chiếc điện thoại đã được cài đặt
                                    sẵn ứng dụng của các ngân hàng và có kết nối mạng. Hệ thống thanh toán qua Mobile
                                    Banking đang được các nhà cung cấp dịch vụ nâng cấp để đáp ứng được tối đa nhu cầu
                                    của khách hàng.</p></div>
                                <button id="collapsible3" onclick="payment(this.id)"><h5>
                                    THANH TOÁN BẰNG VÍ ĐIỆN TỬ</h5>
                                </button>
                                <div class="content3"><p>Hình thức thanh toán hoá đơn bằng ví điện tử được sử dụng rộng
                                    rãi trong thời đại ngày nay. Chỉ với một vài thao tác đơn giản là bạn có thể thanh
                                    toán tại bất kỳ nơi nào chấp nhận thanh toán. Một số ví điện tử phổ biến hiện nay:
                                    Momo, Zalo Pay, SmartPay,ViettelPay...</p></div>
                            </div>
                            <button class="place-order">ĐẶT HÀNG</button>
                        </div>

                    </div>
                </div>
            </div>


        </div>

    </div>

    <!-- footer page -->
    

    <div id="footer"></div>
    <script>
        fetch('footer.html')
          .then(response => response.text())
          .then(data => {
            document.getElementById('footer').innerHTML = data;
          });
      </script>

</div>
<script>
    // Xử lý chuyển tab
    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', function () {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');

            const target = this.getAttribute('data-tab');
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
                if (content.id === target) content.classList.add('active');
            });
        });
    });
    // Chọn bàn và tầng
    function selectTable() {
        const tableSelect = document.getElementById('table-number');
        tableSelect.innerHTML = '';
        for (let i = 1; i <= 15; i++) {
            const option = document.createElement('option');
            option.value = i;
            option.textContent = `Bàn ${i}`;
            tableSelect.appendChild(option);
        }
    }


    function selectFloor() {
        const floorSelect = document.getElementById('floor-number');
        floorSelect.innerHTML = '';
        for (let i = 1; i <= 4; i++) {
            const option = document.createElement('option');
            option.value = i;
            option.textContent = `Tầng ${i}`;
            floorSelect.appendChild(option);
        }
    }
    // Lấy vị trí hiện tại
    document.querySelector('.get-location-btn').addEventListener('click', () => {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(position => {
                const { latitude, longitude } = position.coords;
                document.getElementById('current-location').innerHTML = `
                        <p>Vĩ độ: ${latitude}, Kinh độ: ${longitude}</p>
                        <iframe
                            width="100%"
                            height="200"
                            src="https://www.google.com/maps?q=${latitude},${longitude}&output=embed">
                        </iframe>
                    `;
            });
        } else {
            alert('Trình duyệt của bạn không hỗ trợ định vị!');
        }
    });

    document.querySelector('.place-order').addEventListener('click', function (e) {
        e.preventDefault(); // Ngăn chặn hành động mặc định

        // Xóa thông báo lỗi cũ
        document.querySelectorAll('.error-message').forEach(el => el.remove());
        let isValid = true;

        // Kiểm tra từng trường nhập liệu
        function validateField(fieldId, message) {
            const field = document.getElementById(fieldId);
            if (field && !field.value.trim()) {
                isValid = false;

                // Hiển thị thông báo lỗi nếu chưa có
                if (!field.nextElementSibling || !field.nextElementSibling.classList.contains('error-message')) {
                    const error = document.createElement('div');
                    error.className = 'error-message';
                    error.style.color = 'red';
                    error.style.fontSize = '12px';
                    error.textContent = message;
                    field.parentElement.appendChild(error);
                }

                // Cuộn đến trường bị lỗi đầu tiên
                if (isValid === false && !document.querySelector('.error-message:first-of-type').scrollIntoView) {
                    field.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        }

        // Kiểm tra thông tin chung
        validateField('firstName', 'Vui lòng nhập Tên.');
        validateField('lastName', 'Vui lòng nhập Họ.');
        validateField('phone', 'Vui lòng nhập Số điện thoại.');

        // Kiểm tra các trường nhập liệu theo tab được chọn
        const activeTab = document.querySelector('.tab.active').getAttribute('data-tab');
        if (activeTab === 'tab-other') {
            validateField('other-address', 'Vui lòng nhập Địa chỉ giao hàng.');
        } else if (activeTab === 'tab-current') {
            const currentLocation = document.getElementById('current-location').textContent.trim();
            if (currentLocation === 'Vị trí hiện tại của bạn sẽ hiển thị tại đây.') {
                const locationField = document.querySelector('.get-location-btn');
                if (!locationField.nextElementSibling || !locationField.nextElementSibling.classList.contains('error-message')) {
                    const error = document.createElement('div');
                    error.className = 'error-message';
                    error.style.color = 'red';
                    error.style.fontSize = '12px';
                    error.textContent = 'Vui lòng lấy vị trí hiện tại.';
                    locationField.parentElement.appendChild(error);
                }
                isValid = false;
                locationField.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        } else if (activeTab === 'tab-table') {
            const table = document.getElementById('shop-table').value;
            if (!table) {
                validateField('shop-table', 'Vui lòng chọn Bàn.');
            }
        }

        // Nếu hợp lệ
        if (isValid) {
            alert('Đặt hàng thành công!');
            // Gửi thông tin đặt hàng tới server (nếu cần)
            localStorage.setItem('orderMessage', 'Cảm ơn bạn đã đặt hàng tại cửa hàng chúng tôi!');

            // Chuyển hướng về trang chủ
            window.location.href = 'index.html';
        }
    });

</script>
</body>
<script src="js/main.js"></script>
<script src="js/checkout.js"></script>
</html>